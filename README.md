# nachonet-filemanager
FileManager web application

This app runs under AspNet core and lets you manage your files on disk remotely.

You can:
- browse folders and files within a configured root directory
- move files and directories
- copy files and directories
- rename files and directories
- delete files and directories
- create directories
- download files
- Authenticate with OIDC (open-id connect) - eg with google cloud, azure, aws 
- Authenticate against an AD domain-controller
- Authenticate as a local user (user and password stored by filemanager)
- AD groups are now supported.  roles can be assigned to the AD group name eg "domain users"
- upload files (upload in 500k chunks to support progress indicator and large files)
- edit text files
- image file viewing
- audio playback (MP3, wav, ogg)
- video playback (MP4)
- Run under a windows or linux environment (tested on Windows server 2025 + Debian 12 bookworm)

Future improvements:

Far future improvements
- ZIP file viewing, extraction, and creation

# Configuration:

## authorization.json

### users
```
"users": [
    {
      "user-name": "jane doe",
      "roles": [ "file-reader" ]
    },
    {
      "user-name": "john doe",
      "roles": [ "file-reader", "file-downloader", "file-uploader", "file-writer" ]
    }
  ]
```
a list of users and their assigned roles

### groups
```
  "groups": [
    {
      "group-id": "your group1 id here",
      "label": "file-writers",
      "roles": [ "file-reader", "file-downloader", "file-uploader", "file-writer" ]
    },
    {
      "group-id": "your group2 id here",
      "label": "file-readers",
      "roles": [ "file-reader" ]
    }
  ]
```
a list of groups and their assigned roles

## file-server.json

### root-directory
```"root-directory": "C:\\Path\to\Root"```

The root directory that the app will read from
```"upload-directory": "C:\\Path\to\Uploads"```

The temporary directory that the app will use to store uploads.  Once complete they are moved from this folder to the target folder.

### comparison
```"comparison": "CurrentCulture" | "CurrentCultureIgnoreCase"```

The string comparison method for matching files.  Windows is ignore-case

## oidc-keys.json

This configuration file is generated by the app to store oidc server keys.  

## web-server.json

### use-https-redirection
```"use-https-redirection": true | false```
   
if the user hits a http endpoint then redirect to https.  Should be true for production scenarios

### session-idle-timeout
```"session-idle-timeout": "01:00:00"```

the maximum time for a session to stay active

### token-key
```"token-key": "base64-256bits"```

the encryption key for signing tokens.  Leave blank to generate a 
random key on startup (recommended)

### web-site-domain
```"web-site-domain": "https://filemanager.com/"```

the domain for signing the jwt authentication tokens.  Can be any url

### login-method
```"login-method": "OIDC" | "ActiveDirectory" | "OidcAndActiveDirectory"```

whether to allow for open-id-connect protocol or active directory in the login screen

### oidc-login-text
```"oidc-login-text": "login with Azure"```

The text for the login button to oidc (open-id-connect)

### ad-login-text
```"ad-login-text": "login"```

The text for the login button to active directory

### path-base
```"path-base": "/new-path"```

The base for the virtual directory.  When generating HTML the references to js, css etc 
will be generated with this path.  Leave blank to use the default.  This is useful if you 
are running behind a reverse proxy and need to change the virtual dir.

### OIDC
```
  "oidc": {
    "client-id": "",
    "client-secret": "",
    "redirect-uri": "https://localhost:7087/signin-oidc",
    "token-endpoint": "https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/token",
    "issuer": "https://login.microsoftonline.com/<tenant-id>/v2.0",
    "jwks-uri": "https://login.microsoftonline.com/common/discovery/keys",
    "revocation-endpoint": "",
    "authorization-endpoint": "https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/authorize",
    "scope": "openid+profile",
    "response-type": "id_token",
    "response-mode": "post"
  }
```
connection settings for the OIDC (open-id-connect)
